!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/parser-generator/",r(r.s=51)}([function(e,t,r){"use strict";var n=r(1);class o{constructor(e,t){this.lastIndex=0,this.hasMore=!0,this.buffer=new n.Queue,Object(n.assert)(null!=e),this.text=e,this.patterns=t}peek(){return this.peekFor(0)}peekFor(e){return this.fill(e)?this.buffer.get(e):this.getEOF()}next(){return this.fill(0)?this.buffer.removeFirst():this.getEOF()}fill(e){for(;this.buffer.size()<e+1&&this.hasMore;)this.addToken();return e<this.buffer.size()}addToken(){let e,t;Object(n.assert)(this.hasMore);let r=null;for(let n of this.patterns)if(n.regexp.lastIndex=this.lastIndex,r=n.regexp.exec(this.text),null!=r){e=n.type,t=r[0],this.lastIndex=n.regexp.lastIndex,this.lastIndex>=this.text.length&&(this.hasMore=!1);break}if(null==e||null==t||null==r)return this.hasMore=!1,void this.onMatchFaild(this.text,this.lastIndex);let o=this.createToken(t,e,r);return null!=o&&(this.buffer.addLast(o),!0)}onMatchFaild(e,t){throw new Error(`Unrecognized charactor(${t}):${e[t]} `)}}class i{constructor(e,t=!1,r=[]){this._name=e,this._isStart=t,this._prods=r}get name(){return this._name}get prods(){return this._prods}set prods(e){this._prods=e}get isStart(){return this._isStart}toString(){return this._name}key(){return this}}class s{constructor(e){this.name=e}toString(){return this.name}key(){return this}}const a=new s("NIL"),c=new s("EOF");function u(e){return e instanceof i}function l(e){return e instanceof s||"string"==typeof e}class f{constructor(e,t){this._value=e,this._action=t}get value(){return this._value}get action(){return this.action}isNonTerminal(){return u(this._value)}isTerminal(){return l(this._value)}isNIL(){return this._value==a}toString(){return this._value.toString()+(null==this._action?"":`<%${this._action}%>`)}}class h{constructor(e,t,r,n,o,i=!1,s=-1){this._id=e,this._nt=t,this._actionBody=r,this._preAction=n,this._postAction=o,this._body=new Array,this._leftAssoc=i,this._prec=s;for(let e of r)this._body.push(e.value)}get id(){return this._id}get head(){return this._nt}get body(){return this._body}get actionBody(){return this._actionBody}get preAction(){return this._preAction}get postAction(){return null==this._postAction&&console.warn(`production(${this.id}) doesn't have post action, it is required for Parser`),this._postAction}get action(){return this.postAction}get prec(){return this._prec}set prec(e){this._prec=e}get leftAssoc(){return this._leftAssoc}set leftAssoc(e){this._leftAssoc=e}isEpsilon(){return 1==this._body.length&&this._body[0]===a}toString(){return(null==this._preAction?"":"<%"+this.preAction+"%>")+`(${this._id}) ${this._nt}->${this._actionBody.map(e=>e.toString()).join("")}`+(null==this._postAction?"":"<%"+this.postAction+"%>")}}class p{constructor(e,t){this._prec=e,this._leftAssoc=t}get prec(){return this._prec}get leftAssoc(){return this._leftAssoc}compareTo(e){return!1}}class d{constructor(e,t,r,n=new Map){this.nts=e,this.prods=t,this.startSym=r,this.traits=n;for(let e of t){if(n.has(e.head)){let t=n.get(e.head);e.prec=t.prec,e.leftAssoc=t.leftAssoc}let t=e.prec,r=e.leftAssoc;for(let o of e.body)if(n.has(o)){let e=n.get(o);e.prec>t&&(t=e.prec,r=e.leftAssoc)}e.prec=t,e.leftAssoc=r}this.validate()}validate(){}nonTerminals(){return this.nts}productions(){return this.prods}startNT(){return this.startSym}toString(){return this.prods.join("\n")}}class _ extends d{validate(){Object(n.assert)(1==this.startSym.prods.length,`The start symbol of an augmented grammar has one and only one production! but ${this.startSym} has ${this.startSym.prods.length}:\n${this.startSym.prods.join("\n")}`)}}class g{isReduce(){return!1}isShift(){return!1}isGoto(){return!1}isAccept(){return!1}}class b extends g{constructor(e){super(),this._nextStateId=e}get nextStateId(){return this._nextStateId}toString(){return`shift ${this._nextStateId}`}equals(e){return e instanceof b&&e._nextStateId==this._nextStateId}isShift(){return!0}}class y extends g{constructor(e){super(),this._nextStateId=e}get nextStateId(){return this._nextStateId}toString(){return`goto ${this._nextStateId}`}equals(e){return e instanceof y&&e._nextStateId==this._nextStateId}isGoto(){return!0}}class v extends g{constructor(e){super(),this._prod=e}get prod(){return this._prod}toString(){return`reduce ${this._prod.id}`}equals(e){return e instanceof v&&e._prod==this._prod}isReduce(){return!0}}class m extends g{constructor(){super()}equals(e){return e instanceof m}toString(){return"accept"}isAccept(){return!0}}class O{constructor(){this.parsingTable=new Map}get table(){return this.parsingTable}put(e,t,r){let n=this.parsingTable.get(e);null==n&&(n=new Map,this.parsingTable.set(e,n)),n.set(t,r)}has(e,t,r){let n=this.parsingTable.get(e);if(null==n)return!1;let o=n.get(t);return null!=o&&o.equals(r)}get(e,t){let r=this.parsingTable.get(e);if(null!=r)return r.get(t)}getExpectedSymbols(e){let t=this.parsingTable.get(e);return null==t?[]:Array.from(t.keys())}getExpectedTokens(e){return this.getExpectedSymbols(e).filter(e=>!(e instanceof i))}}r.d(t,"c",(function(){return o})),r.d(t,"p",(function(){return u})),r.d(t,"q",(function(){return l})),r.d(t,"g",(function(){return a})),r.d(t,"d",(function(){return c})),r.d(t,"h",(function(){return i})),r.d(t,"o",(function(){return s})),r.d(t,"n",(function(){return f})),r.d(t,"m",(function(){return p})),r.d(t,"j",(function(){return h})),r.d(t,"f",(function(){return d})),r.d(t,"b",(function(){return _})),r.d(t,"l",(function(){return b})),r.d(t,"k",(function(){return v})),r.d(t,"e",(function(){return y})),r.d(t,"a",(function(){return m})),r.d(t,"i",(function(){return O}))},function(e,t,r){"use strict";let n,o;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.addAll_Map=function(e,t){for(let[r,n]of t)e.set(r,n);return e},t.addAll_Set=function(e,t){for(let r of t)e.add(r);return e},t.isIterable=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},t.assert=s,t.Queue=t.Stack=void 0,n=Symbol.iterator;t.Stack=class{*[n](){for(let e of this.arr)yield e}constructor(...e){i(this,"arr",void 0),this.arr=new Array;for(let t of e)this.arr.push(t)}peek(){return this.arr[this.arr.length-1]}push(...e){this.arr.push(...e)}pop(){return this.arr.pop()}batchPop(e){s(e>0&&e<=this.arr.length);let t=[];for(;e>0;e--)t.push(this.pop());return t}size(){return this.arr.length}join(e){return this.arr.join(e)}map(e,t){return this.arr.map(e,t)}},o=Symbol.iterator;function s(e,t){if(!e)throw new Error(`Assert Error: ${t}`)}t.Queue=class{[o](){let e=0,t=this.arr;return{next:function(){return e<t.length?{value:t[e++],done:!1}:{value:null,done:!0}}}}constructor(...e){i(this,"arr",void 0),this.arr=new Array(...e)}get(e){return this.arr[e]}peekFirst(){return this.arr[0]}peekLast(){return this.arr[this.arr.length-1]}addFirst(e){this.arr.unshift(e)}addLast(e){this.arr.push(e)}removeLast(){return this.arr.pop()}removeFirst(){return this.arr.shift()}size(){return this.arr.length}dequeue(){return this.removeFirst()}enqueue(e){this.addLast(e)}}},function(e,t,r){"use strict";var n=Array.isArray;t.a=n},function(e,t,r){"use strict";var n=r(30),o="object"==typeof self&&self&&self.Object===Object&&self,i=n.a||o||Function("return this")();t.a=i},function(e,t,r){"use strict";(function(t){const n=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,o=()=>{const e={enabled:!0,visible:!0,styles:{},keys:{}};"FORCE_COLOR"in t.env&&(e.enabled="0"!==t.env.FORCE_COLOR);const o=(e,t,r)=>"function"==typeof e?e(t):e.wrap(t,r),i=(t,r)=>{if(""===t||null==t)return"";if(!1===e.enabled)return t;if(!1===e.visible)return"";let n=""+t,i=n.includes("\n"),s=r.length;for(s>0&&r.includes("unstyle")&&(r=[...new Set(["unstyle",...r])].reverse());s-- >0;)n=o(e.styles[r[s]],n,i);return n},s=(t,r,n)=>{e.styles[t]=(e=>{let t=e.open=`[${e.codes[0]}m`,r=e.close=`[${e.codes[1]}m`,n=e.regex=new RegExp(`\\u001b\\[${e.codes[1]}m`,"g");return e.wrap=(e,o)=>{e.includes(r)&&(e=e.replace(n,r+t));let i=t+e+r;return o?i.replace(/\r*\n/g,`${r}$&${t}`):i},e})({name:t,codes:r}),(e.keys[n]||(e.keys[n]=[])).push(t),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(r){e.alias(t,r)},get(){let r=e=>i(e,r.stack);return Reflect.setPrototypeOf(r,e),r.stack=this.stack?this.stack.concat(t):[t],r}})};return s("reset",[0,0],"modifier"),s("bold",[1,22],"modifier"),s("dim",[2,22],"modifier"),s("italic",[3,23],"modifier"),s("underline",[4,24],"modifier"),s("inverse",[7,27],"modifier"),s("hidden",[8,28],"modifier"),s("strikethrough",[9,29],"modifier"),s("black",[30,39],"color"),s("red",[31,39],"color"),s("green",[32,39],"color"),s("yellow",[33,39],"color"),s("blue",[34,39],"color"),s("magenta",[35,39],"color"),s("cyan",[36,39],"color"),s("white",[37,39],"color"),s("gray",[90,39],"color"),s("grey",[90,39],"color"),s("bgBlack",[40,49],"bg"),s("bgRed",[41,49],"bg"),s("bgGreen",[42,49],"bg"),s("bgYellow",[43,49],"bg"),s("bgBlue",[44,49],"bg"),s("bgMagenta",[45,49],"bg"),s("bgCyan",[46,49],"bg"),s("bgWhite",[47,49],"bg"),s("blackBright",[90,39],"bright"),s("redBright",[91,39],"bright"),s("greenBright",[92,39],"bright"),s("yellowBright",[93,39],"bright"),s("blueBright",[94,39],"bright"),s("magentaBright",[95,39],"bright"),s("cyanBright",[96,39],"bright"),s("whiteBright",[97,39],"bright"),s("bgBlackBright",[100,49],"bgBright"),s("bgRedBright",[101,49],"bgBright"),s("bgGreenBright",[102,49],"bgBright"),s("bgYellowBright",[103,49],"bgBright"),s("bgBlueBright",[104,49],"bgBright"),s("bgMagentaBright",[105,49],"bgBright"),s("bgCyanBright",[106,49],"bgBright"),s("bgWhiteBright",[107,49],"bgBright"),e.ansiRegex=n,e.hasColor=e.hasAnsi=t=>(e.ansiRegex.lastIndex=0,"string"==typeof t&&""!==t&&e.ansiRegex.test(t)),e.alias=(t,r)=>{let n="string"==typeof r?e[r]:r;if("function"!=typeof n)throw new TypeError("Expected alias to be the name of an existing color (string) or a function");n.stack||(Reflect.defineProperty(n,"name",{value:t}),e.styles[t]=n,n.stack=[t]),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,set(r){e.alias(t,r)},get(){let t=e=>i(e,t.stack);return Reflect.setPrototypeOf(t,e),t.stack=this.stack?this.stack.concat(n.stack):n.stack,t}})},e.theme=t=>{if(null===(r=t)||"object"!=typeof r||Array.isArray(r))throw new TypeError("Expected theme to be an object");var r;for(let r of Object.keys(t))e.alias(r,t[r]);return e},e.alias("unstyle",t=>"string"==typeof t&&""!==t?(e.ansiRegex.lastIndex=0,t.replace(e.ansiRegex,"")):""),e.alias("noop",e=>e),e.none=e.clear=e.noop,e.stripColor=e.unstyle,e.symbols=r(49),e.define=s,e};e.exports=o(),e.exports.create=o}).call(this,r(40))},function(e,t,r){"use strict";t.a=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";var n=r(3).a.Symbol;t.a=n},function(e,t,r){"use strict";var n,o=r(31),i=r(3).a["__core-js_shared__"],s=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var a=function(e){return!!s&&s in e},c=r(9),u=r(14),l=/^\[object .+?Constructor\]$/,f=Function.prototype,h=Object.prototype,p=f.toString,d=h.hasOwnProperty,_=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var g=function(e){return!(!Object(c.a)(e)||a(e))&&(Object(o.a)(e)?_:l).test(Object(u.a)(e))};var b=function(e,t){return null==e?void 0:e[t]};t.a=function(e,t){var r=b(e,t);return g(r)?r:void 0}},function(e,t,r){(function(n){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(47)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(40))},function(e,t,r){"use strict";t.a=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){"use strict";var n=r(6),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=n.a?n.a.toStringTag:void 0;var c=function(e){var t=i.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[a]=r:delete e[a]),o},u=Object.prototype.toString;var l=function(e){return u.call(e)},f=n.a?n.a.toStringTag:void 0;t.a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":f&&f in Object(e)?c(e):l(e)}},function(e,t,r){"use strict";var n=r(37),o=r(21),i=r(32),s=Object(i.a)(Object.keys,Object),a=Object.prototype.hasOwnProperty;var c=function(e){if(!Object(o.a)(e))return s(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t},u=r(23);t.a=function(e){return Object(u.a)(e)?Object(n.a)(e):c(e)}},function(e,t,r){"use strict";var n=r(7),o=r(3),i=Object(n.a)(o.a,"DataView"),s=r(16),a=Object(n.a)(o.a,"Promise"),c=Object(n.a)(o.a,"Set"),u=Object(n.a)(o.a,"WeakMap"),l=r(10),f=r(14),h=Object(f.a)(i),p=Object(f.a)(s.a),d=Object(f.a)(a),_=Object(f.a)(c),g=Object(f.a)(u),b=l.a;(i&&"[object DataView]"!=b(new i(new ArrayBuffer(1)))||s.a&&"[object Map]"!=b(new s.a)||a&&"[object Promise]"!=b(a.resolve())||c&&"[object Set]"!=b(new c)||u&&"[object WeakMap]"!=b(new u))&&(b=function(e){var t=Object(l.a)(e),r="[object Object]"==t?e.constructor:void 0,n=r?Object(f.a)(r):"";if(n)switch(n){case h:return"[object DataView]";case p:return"[object Map]";case d:return"[object Promise]";case _:return"[object Set]";case g:return"[object WeakMap]"}return t});t.a=b},function(e,t,r){"use strict";(function(e){var n=r(30),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o&&n.a.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.a=a}).call(this,r(41)(e))},function(e,t,r){"use strict";var n=Function.prototype.toString;t.a=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,r){"use strict";var n=function(){this.__data__=[],this.size=0},o=r(22);var i=function(e,t){for(var r=e.length;r--;)if(Object(o.a)(e[r][0],t))return r;return-1},s=Array.prototype.splice;var a=function(e){var t=this.__data__,r=i(t,e);return!(r<0)&&(r==t.length-1?t.pop():s.call(t,r,1),--this.size,!0)};var c=function(e){var t=this.__data__,r=i(t,e);return r<0?void 0:t[r][1]};var u=function(e){return i(this.__data__,e)>-1};var l=function(e,t){var r=this.__data__,n=i(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function f(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}f.prototype.clear=n,f.prototype.delete=a,f.prototype.get=c,f.prototype.has=u,f.prototype.set=l;t.a=f},function(e,t,r){"use strict";var n=r(7),o=r(3),i=Object(n.a)(o.a,"Map");t.a=i},function(e,t,r){"use strict";var n=r(15);var o=function(){this.__data__=new n.a,this.size=0};var i=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var s=function(e){return this.__data__.get(e)};var a=function(e){return this.__data__.has(e)},c=r(16),u=r(19);var l=function(e,t){var r=this.__data__;if(r instanceof n.a){var o=r.__data__;if(!c.a||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new u.a(o)}return r.set(e,t),this.size=r.size,this};function f(e){var t=this.__data__=new n.a(e);this.size=t.size}f.prototype.clear=o,f.prototype.delete=i,f.prototype.get=s,f.prototype.has=a,f.prototype.set=l;t.a=f},function(e,t,r){"use strict";(function(e){var n=r(3),o=r(43),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?n.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||o.a;t.a=c}).call(this,r(41)(e))},function(e,t,r){"use strict";var n=r(7),o=Object(n.a)(Object,"create");var i=function(){this.__data__=o?o(null):{},this.size=0};var s=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},a=Object.prototype.hasOwnProperty;var c=function(e){var t=this.__data__;if(o){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(t,e)?t[e]:void 0},u=Object.prototype.hasOwnProperty;var l=function(e){var t=this.__data__;return o?void 0!==t[e]:u.call(t,e)};var f=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this};function h(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}h.prototype.clear=i,h.prototype.delete=s,h.prototype.get=c,h.prototype.has=l,h.prototype.set=f;var p=h,d=r(15),_=r(16);var g=function(){this.size=0,this.__data__={hash:new p,map:new(_.a||d.a),string:new p}};var b=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var y=function(e,t){var r=e.__data__;return b(t)?r["string"==typeof t?"string":"hash"]:r.map};var v=function(e){var t=y(this,e).delete(e);return this.size-=t?1:0,t};var m=function(e){return y(this,e).get(e)};var O=function(e){return y(this,e).has(e)};var w=function(e,t){var r=y(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function j(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}j.prototype.clear=g,j.prototype.delete=v,j.prototype.get=m,j.prototype.has=O,j.prototype.set=w;t.a=j},function(e,t,r){"use strict";var n=r(8),o=r.n(n),i=r(0),s=r(1);class a{constructor(){this.dependencies=new Map}isConnected(e,t){let r=this.dependencies.get(e);if(void 0===r)return!1;if(r.has(t))return!0;let n=new s.Queue(e),o=new Set([e]);for(;n.size()>0;){let e=n.dequeue(),r=this.dependencies.get(e);if(null!=r){if(r.has(t))return!0;for(let e of r)o.has(e)||(o.add(e),n.enqueue(e))}}return!1}registerAndCheckCycl(e,t){let r=this.dependencies.get(e);return void 0===r&&(r=new Set,this.dependencies.set(e,r)),r.add(t),this.isConnected(t,e)}}Error;let c=o()("PG:first&follow");class u{constructor(e){this.firstMapCache=new Map,this.cyclicDector=new a,this.grammar=e}getFirstSet(e){if(Object(i.q)(e))return new Set([e]);{let t=this.getFirstMap(e);return new Set(t.keys())}}getFirstMap(e){if(this.firstMapCache.has(e))return this.firstMapCache.get(e);let t=new Map;for(let r=0;r<e.prods.length;r++){let n=e.prods[r];for(let r=0;r<n.body.length;r++){let o=n.body[r];if(o===e){0===r&&c(`Found the left recursive production ${n}`);break}if(Object(i.p)(o)&&this.cyclicDector.registerAndCheckCycl(e,o)){c(`Cyclic dependencies are detected between the non-terminal ${e} and ${o}  when calculating the first set of ${e}!`);continue}let s=this.getFirstSet(o);for(let e of s)e!=i.g&&t.set(e,n);if(!s.has(i.g))break;r===n.body.length-1&&t.set(i.g,n)}}return this.firstMapCache.set(e,t),t}getFirstTable(){let e=new Map;for(let t of this.grammar.nonTerminals()){let r=this.getFirstMap(t);e.set(t,r)}return e}}class l{constructor(e,t){this.cyclicDector=new a,this.cache=new Map,this.grammar=e,this.FirstCalculator=t}throwError(e,t){throw new Error(`Cyclic dependencies are detected between the non-terminal ${e} and ${t}  when calculating the follow set of ${e}!`)}getFollowSet(e){if(this.cache.has(e))return c(`cache hit:${e}`),this.cache.get(e);let t=this.grammar.nonTerminals(),r=new Set,n=new Set,o=new Set;t[0]==e&&(r.add(i.d),c(`+EOF is added because ${e} is the beginning symbol`));for(let a=0;a<t.length;a++){let u=t[a];for(let t=0;t<u.prods.length;t++){let a=u.prods[t];c(`Scanning ${e} in production:${a}`);let l=!1;for(let t=0;t<a.body.length;t++){if(a.body[t]!=e&&!l)continue;if(t==a.body.length-1){if(u!=e&&!o.has(u)){if(this.cyclicDector.registerAndCheckCycl(e,u))continue;c(`+Since ${e.name} is at the end of production ${a.head},add Follow(${u.name})`),Object(s.addAll_Set)(r,this.getFollowSet(u)),o.add(u)}break}l=!0;let f=a.body[t+1];if(n.has(f))continue;let h=this.FirstCalculator.getFirstSet(f);n.add(f),h.has(i.g)?(Object(s.addAll_Set)(r,h),r.delete(i.g),c(`+The symbol ${f} follows ${e},add First(${f})-{𝝴}, due ${f} contains 𝝴 ,scan the following symbol of ${f} `)):(Object(s.addAll_Set)(r,h),c(`+The symbol ${f} follows ${e},add First(${f})`),l=!1)}}}return this.cache.set(e,r),r}getFollowTable(){let e=new Map;for(let t of this.grammar.nonTerminals()){let r=this.getFollowSet(t);e.set(t,r)}return e}}class f{constructor(e,t=0,r=new Set){this._dot=0,this._prod=e,this._dot=e.isEpsilon()?e.body.length:t,this.lookaheadSet=r}get prod(){return this._prod}get dotPos(){return this._dot}hasNext(){return this._dot<this.prod.body.length}nextSymbol(){if(!this.hasNext())throw new Error(`${this} has no next item!`);return this.prod.body[this._dot]}nextItem(){if(!this.hasNext())throw new Error(`${this} has no next item!`);return new f(this.prod,this._dot+1,this.lookaheadSet)}toString(){let e="",t=this.prod.body;for(let r=0;r<t.length;r++)this._dot==r&&(e+="·"),e+=("string"==typeof t[r]?`'${t[r].replace(/'/g,"\\'")}'`:t[r])+" ";return this._dot==t.length&&(e+="·"),e+=" ❕"+Array.from(this.lookaheadSet).map(e=>"string"==typeof e?`'${e.replace(/'/g,"\\'")}'`:e).join(" "),`${this.prod.head.name}->${e}`}equals(e){if(e.prod.id!=this.prod.id)return!1;if(e._dot!=this._dot)return!1;if(e.lookaheadSet.size!=this.lookaheadSet.size)return!1;for(let t of this.lookaheadSet)if(!e.lookaheadSet.has(t))return!1;return!0}isSameCoreWith(e){return e.prod.id==this.prod.id&&e._dot==this._dot}}class h extends Array{constructor(...e){super(...e),this.added=new Map;for(let t of e)this.added.set(this.coreKey(t),t)}contains(e){return this.added.has(this.coreKey(e))}coreKey(e){return e.prod.id+""+e.dotPos}pushOrMerge(e){let t=this.added.get(this.coreKey(e));void 0===t?this.push(e):Object(s.addAll_Set)(t.lookaheadSet,e.lookaheadSet)}push(e){return this.added.set(this.coreKey(e),e),super.push(e)}toString(){let e="";for(let t of this)e+=t.toString()+"\n";return e.replace(/\n$/,"")}equals(e){if(e.length!=this.length)return!1;for(let t of this){let r=!1;for(let n of e)if(t.equals(n)){r=!0;break}if(!r)return!1}return!0}getNextSymbols(){let e=new Set;for(let t of this)t.hasNext()&&e.add(t.nextSymbol());return e}}class p extends h{constructor(e,t){super(...t),this.mapping=new Map,this.id=e}toString(){return`<${this.id}>\n${super.toString()}`}addNextState(e,t){Object(s.assert)(null==this.mapping.get(e),"A state can only have one next state to the same symbol"),this.mapping.set(e,t)}getNextState(e){return this.mapping.get(e)}}class d extends Array{constructor(){super(...arguments),this.mapping=new Map}getExisting(e){for(let t of this)if(t.equals(e))return t;return null}satrtState(){return Object(s.assert)(null!=this[0]),this[0]}}class _ extends i.l{constructor(e,t=-1,r=!1){super(e),this.prec=t,this.leftAssoc=r}setIfLarger(e,t){e>this.prec&&(this.prec=e,this.leftAssoc=t)}isShift(){return!0}}class g extends i.k{constructor(e,t=-1,r=!1){super(e.prod),this.item=e,this.prec=t,this.leftAssoc=r}equals(e){return e instanceof i.k&&e.prod==this.prod}isReduce(){return!0}}let b=o()("PG:automata");function y(e,t){let r=1,n=t.getStartState(e);b(`${n}`);let o=new d;o.push(n);let i=0;for(;i<o.length;){let e=o[i++],n=e.getNextSymbols();for(let i of n){let n=t.GOTO(e,i),s=o.getExisting(n);null==s&&(s=new p(r++,n),o.push(s),b(`\n+Adding a new state:\n${s}\n`)),e.addNextState(i,s),b(`mapping: ${e.id} ----- ${i} -----\x3e ${s.id}`)}}return o}var v=r(4),m=r.n(v);let O=o()("APP:LR:parsing-table");function w(e,t,r){let n=new i.i;for(let l of e)for(let e of l){let{prec:f,leftAssoc:h}=e.prod;if(e.hasNext()){let t=e.nextSymbol(),r=n.get(l.id,t);if(null!=r)if(r.isReduce()){if(Object(s.assert)(r instanceof g),o=l,a=e,c=r,u=t,console.log(`\n${m.a.yellow("Reduce-Shift conflict detected:")}\n${m.a.yellow("[State]")}\n${o.toString()}\n${m.a.yellow("[Conflict Symbol]")}\n${u}\n${m.a.yellow("[Existing Reduce]")}\n${c}\nproduction: ${c.item}\nprecedence: ${c.prod.prec}\nassociation: ${c.prod.leftAssoc?"left":"right"}\n${m.a.yellow("[Shift]")}\nproduction: ${a}\nprecedence: ${a.prod.prec}\nassociation: ${a.prod.leftAssoc?"left":"right"}\n\t\t`),"reduce"==j({prec:f,leftAssoc:h},{prec:r.prec,leftAssoc:r.leftAssoc})){console.log("Choose Existing-Reduce");continue}console.log("Choose Shift")}else r.isShift()&&r.setIfLarger(f,h);let p,d=l.getNextState(t);Object(s.assert)(null!=d),p=t instanceof i.h?new i.e(d.id):new _(d.id,f,h),O(`state(${l.id}) ${t} ${p}`),n.put(l.id,t,p)}else{let o=r(e);Object(s.assert)(null!=o);for(let r of o){let o,a=n.get(l.id,r);if(null!=a)if(a.isReduce()&&a.prod.head!=e.prod.head){if(Object(s.assert)(a instanceof g),S(l,a,e,r),!A({prec:f,leftAssoc:h},{prec:a.prec,leftAssoc:a.leftAssoc})){console.log("choose Existing-Reduce");continue}console.log("Choose Current-Reduce")}else if(a.isShift()){if(Object(s.assert)(a instanceof _),E(l,a,e,r),"shift"==j({prec:a.prec,leftAssoc:a.leftAssoc},{prec:f,leftAssoc:h})){console.log("Choose Existing-Shift");continue}console.log("Choose Reduce")}o=r==i.d&&e.prod.head==t?new i.a:new g(e,f,h),O(`state(${l.id}) ${r} ${o}`),n.put(l.id,r,o)}}}var o,a,c,u;return n}function j(e,t){let{prec:r,leftAssoc:n}=t,{prec:o,leftAssoc:i}=e;return r==o?n?"reduce":"shift":r>o?"reduce":"shift"}function A(e,t){let{prec:r}=e,{prec:n}=t;return r>n}function E(e,t,r,n){console.log(`\n${m.a.yellow("Shift-Reduce conflict detected:")}\n${m.a.yellow("[State]")}\n${e.toString()}\n${m.a.yellow("[Conflict Symbol]")}\n${n}\n${m.a.yellow("[Existing Shift]")}\nnextState: <${t.nextStateId}>:\nprecedence: ${t.prec}\nassociation: ${t.leftAssoc?"left":"right"}\n${m.a.yellow("[Reduce]")}\nitem: ${r}\nprecedence: ${r.prod.prec}\nassociation: ${r.prod.leftAssoc?"left":"right"}\n\t\t`)}function S(e,t,r,n){console.log(`\n${m.a.yellow("Reduce-Reduce conflict detected:")}\n${m.a.yellow("[State]")}\n${e}\n${m.a.yellow("[Conflict Symbol]")}\n${n}\n${m.a.yellow("[Existing Reduce]")}\nproduction: ${t.prod}\nprecedence: ${t.prec}\nassociation: ${t.leftAssoc?"left":"right"}\n${m.a.redBright("[Current Reduce]")}\nitem: ${r.toString()}\nprecedence: ${r.prod.prec}\nassociation: ${r.prod.leftAssoc?"left":"right"}\n\t\t`)}class T{closure(e){let t=e,r=new Set;for(let e=0;e<t.length;e++){let n=t[e];if(!n.hasNext())continue;let o=n.nextSymbol();if(o instanceof i.h&&!r.has(o)){for(let e of o.prods)t.push(new f(e));r.add(o)}}return t}GOTO(e,t){let r=new h;for(let n of e)n.hasNext()&&n.nextSymbol()==t&&r.push(n.nextItem());return this.closure(r)}getStartState(e){return new p(0,this.closure(new h(new f(e.startNT().prods[0]))))}}function C(e){return y(e,new T)}function P(e,t,r){if(null==t&&(t=C(e)),null==r){let t=new l(e,new u(e));r=e=>t.getFollowSet(e)}return w(t,e.startNT(),e=>r(e.prod.head))}let x=o()("PG:LR1");class M{constructor(e){this.getFirstSet=e}GOTO(e,t){let r=new h;for(let n of e)n.hasNext()&&n.nextSymbol()===t&&r.push(n.nextItem());return this.closure(r)}closure(e){let t=e;for(let e=0;e<t.length;e++){let r=t[e];if(!r.hasNext())continue;let n=r.nextSymbol();if(!(n instanceof i.h))continue;if(r.prod.body[0]===r.prod.head&&0==r.dotPos){x(`Stop expanding left recursion production ${n}`);continue}let o=this.getLeftRecursiveProds(n),a=this.determineNonLeftRecursionLookSet(r);if(o.length>0){let e=this.determineLeftRecursionLookSet(r);for(let r of n.prods){let n=new Set;Object(s.addAll_Set)(n,e),Object(s.addAll_Set)(n,a),t.pushOrMerge(new f(r,0,n))}}else for(let e of n.prods){let r=new f(e,0,a);t.pushOrMerge(r)}}return t}determineLeftRecursionLookSet(e){let t=e.nextSymbol();Object(s.assert)(t instanceof i.h);let r=new Set,n=this.getLeftRecursiveProds(t);for(let o of n){let n=!1;for(let a=0;a<o.body.length;a++)if(o.body[a]==t||n)if(a==o.body.length-1)Object(s.addAll_Set)(r,e.lookaheadSet);else{let e=o.body[a+1],t=this.getFirstSet(e);if(Object(s.addAll_Set)(r,t),!t.has(i.g))break;r.delete(i.g),n=!0}}return r}determineNonLeftRecursionLookSet(e){let t=e.nextSymbol();Object(s.assert)(t instanceof i.h);let r=new Set;for(let t=e.dotPos;t<e.prod.body.length;t++){if(t==e.prod.body.length-1){Object(s.addAll_Set)(r,e.lookaheadSet);break}{let n=this.getFirstSet(e.prod.body[t+1]);if(Object(s.addAll_Set)(r,n),!n.has(i.g))break;r.delete(i.g)}}return r}getLeftRecursiveProds(e){let t=[];for(let r of e.prods)for(let n of r.body){if(n==e){t.push(r);break}if(!this.getFirstSet(n).has(i.g))break}return x(t.join(",")),t}getStartState(e){return new p(0,this.closure(new h(new f(e.startNT().prods[0],0,new Set([i.d])))))}}function R(e,t){if(null==t){let r=new u(e);t=e=>r.getFirstSet(e)}return y(e,new M(t))}function $(e,t){return null==t&&(t=R(e)),w(t,e.startNT(),e=>e.lookaheadSet)}o()("PG:LLParser");o()("PG:lr-parser");r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"f",(function(){return P})),r.d(t,"e",(function(){return C})),r.d(t,"d",(function(){return $})),r.d(t,"c",(function(){return R}))},function(e,t,r){"use strict";var n=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,r){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){"use strict";var n=r(31),o=r(24);t.a=function(e){return null!=e&&Object(o.a)(e.length)&&!Object(n.a)(e)}},function(e,t,r){"use strict";t.a=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,r){"use strict";t.a=function(e){return function(t){return e(t)}}},function(e,t,r){"use strict";var n=r(7),o=function(){try{var e=Object(n.a)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.a=function(e,t,r){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t,r){"use strict";var n=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i},o=r(33),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),n(s(e),(function(t){return i.call(e,t)})))}:o.a;t.a=a},function(e,t,r){"use strict";var n=r(3).a.Uint8Array;t.a=n},function(e,t,r){"use strict";var n=r(36),o=r(27),i=r(11);t.a=function(e){return Object(n.a)(e,i.a,o.a)}},function(e,t,r){"use strict";(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.a=r}).call(this,r(50))},function(e,t,r){"use strict";var n=r(10),o=r(9);t.a=function(e){if(!Object(o.a)(e))return!1;var t=Object(n.a)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){"use strict";t.a=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){"use strict";t.a=function(){return[]}},function(e,t,r){"use strict";t.a=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t,r){"use strict";var n=/^(?:0|[1-9]\d*)$/;t.a=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){"use strict";var n=r(34),o=r(2);t.a=function(e,t,r){var i=t(e);return Object(o.a)(e)?i:Object(n.a)(i,r(e))}},function(e,t,r){"use strict";var n=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},o=r(38),i=r(2),s=r(18),a=r(35),c=r(39),u=Object.prototype.hasOwnProperty;t.a=function(e,t){var r=Object(i.a)(e),l=!r&&Object(o.a)(e),f=!r&&!l&&Object(s.a)(e),h=!r&&!l&&!f&&Object(c.a)(e),p=r||l||f||h,d=p?n(e.length,String):[],_=d.length;for(var g in e)!t&&!u.call(e,g)||p&&("length"==g||f&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||Object(a.a)(g,_))||d.push(g);return d}},function(e,t,r){"use strict";var n=r(10),o=r(5);var i=function(e){return Object(o.a)(e)&&"[object Arguments]"==Object(n.a)(e)},s=Object.prototype,a=s.hasOwnProperty,c=s.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(e){return Object(o.a)(e)&&a.call(e,"callee")&&!c.call(e,"callee")};t.a=u},function(e,t,r){"use strict";var n=r(10),o=r(24),i=r(5),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var a=function(e){return Object(i.a)(e)&&Object(o.a)(e.length)&&!!s[Object(n.a)(e)]},c=r(25),u=r(13),l=u.a&&u.a.isTypedArray,f=l?Object(c.a)(l):a;t.a=f},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=a(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function _(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return genParser}));var _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_light0x00_shim__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(46),lodash_groupBy__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(45),_parser_generator_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),Tag;!function(e){e.BLANK="BLANK",e.CRLF="CRLF",e.EOF="EOF",e.NIL="NIL",e.HEAD="HEAD",e.SCRIPT="SCRIPT",e.STRING="STRING",e.STRING_SINGLE_QUOTES="STRING_SINGLE_QUOTES",e.STRING_DOUBLE_QUOTES="STRING_DOUBLE_QUOTES",e.NUMBER="NUMBER",e.WORD="WORD",e.SINGLE="SINGLE",e.ID="ID",e.KEYWORD="KEYWORD",e.ASSOC="ASSOC"}(Tag||(Tag={}));class Token{constructor(e){this._lineNo=-1,this._colNo=-1,this._tag=e}setPos(e,t){this._lineNo=e,this._colNo=t}get lineNo(){return this._lineNo}get colNo(){return this._colNo}get tag(){return this._tag}toString(){return this.value+`(${this._lineNo},${this._colNo})`}}class Special extends Token{constructor(e){super(e)}get value(){return this._tag}}class Word extends Token{constructor(e,t){super(e),this.lexeme=t}get value(){return this.lexeme}}class Number extends Token{constructor(e){super(Tag.NUMBER),this.lexeme=e}get value(){return this.lexeme}}/("|')(?<value>(\\(\1)|[^\1])*)?(\1)/.exec("'\\\"\\'aa'");class GrammarLexer extends _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.c{constructor(e){super(e,[{regexp:/\n+/y,type:Tag.CRLF},{regexp:/\s+/y,type:Tag.BLANK},{regexp:/#(?<value>\w+)/y,type:Tag.HEAD},{regexp:/[A-Z_a-z]\w*/y,type:Tag.WORD},{regexp:/<%(?<value>(.|\s)+?)%>/y,type:Tag.SCRIPT},{regexp:/'(?<value>(\\(')|[^'])*)?'/y,type:Tag.STRING},{regexp:/"(?<value>(\\(")|[^"])*)?"/y,type:Tag.STRING},{regexp:/([1-9]\d*\.\d+)|(0\.\d+)/y,type:Tag.NUMBER},{regexp:/(0(?![0-9]))|([1-9]\d*(?!\.))/y,type:Tag.NUMBER},{regexp:/(.)/y,type:Tag.SINGLE}]),this.lineNo=1,this.colNo=0,this.reserves=new Map,this.reserves.set("left",new Word(Tag.ASSOC,"left")),this.reserves.set("right",new Word(Tag.ASSOC,"right")),this.reserves.set("NIL",new Special(Tag.NIL))}getEOF(){return null==this.eofToken&&(this.eofToken=new Special(Tag.EOF),this.eofToken.setPos(this.lineNo,this.colNo)),this.eofToken}createToken(e,t,r){let n;switch(t){case Tag.CRLF:this.lineNo+=e.length,this.colNo=0;break;case Tag.BLANK:break;case Tag.WORD:{let t=this.reserves.get(e);n=null==t?new Word(Tag.ID,e):Object(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_2__.a)(t);break}case Tag.HEAD:n=new Word(Tag.HEAD,r.groups.value);break;case Tag.SCRIPT:{n=new Word(Tag.SCRIPT,r.groups.value),n.setPos(this.lineNo,this.colNo);let{rows:t,cols:o}=shit(e);this.lineNo+=t,this.colNo=t>0?o:this.colNo+=o;break}case Tag.NUMBER:n=new Number(parseFloat(e));break;case Tag.STRING:{let e;e=r[0].startsWith('"')?r.groups.value.replace(/\\"/g,'"'):r.groups.value.replace(/\\'/g,"'"),n=new Word(Tag.STRING,e)}break;case Tag.SINGLE:n=new Word(Tag.SINGLE,e);break;default:throw new Error(`unknown type ${t}`)}return t!=Tag.SCRIPT&&(null!=n&&n.setPos(this.lineNo,this.colNo),this.colNo+=e.length),n}onMatchFaild(e,t){throw new Error(`unrecognized charactor(${this.lineNo},${this.colNo}):${e[t]} `)}}function shit(e){let t=0,r=0,n=!0;for(let o=e.length-1;o>=0;o--)"\n"==e[o]?(t++,n=!1):n&&r++;return{rows:t,cols:r}}class ASTree{}class ProgramNode extends ASTree{constructor(e,t,r){super(),this.traits=new Map,this.grammarNode=e,this.blocks=r}accpet(e){for(let t of this.blocks)t.accpet(e);e.visitProgramNode(this)}}class ScriptNode extends ASTree{constructor(e){super(),this.script=e.value}accpet(e){e.visitScriptNode(this)}}class PrecAssocNode extends ASTree{constructor(e){super(),this.children=e}accpet(e){e.visitPrecAssocNode(this)}}class PrecassocItemNode extends ASTree{constructor(e){super(),Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(null!=e[0]),this.symbol=e[0],console.log(e),null!=e[1]?this.leftAssoc="left"==e[1].value:this.leftAssoc=!1,null!=e[2]?this.prec=e[2].value:this.prec=-1}accpet(e){throw new Error("Method not implemented.")}}class Env{constructor(){this.syms=new Map,this.rsyms=new Map,this.prods=new Map,this.rprods=new Map,this.registerSym("NIL",_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.g),this.registerSym("EOF",_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.d)}registerSym(e,t){this.syms.set(e,t),this.rsyms.set(t,e)}getSym(e){return this.syms.get(e)}hasSym(e){return this.syms.has(e)}getSymVarName(e){return this.rsyms.get(e)}registerProd(e,t){this.rprods.set(e,t),this.prods.set(t,e)}getProdVarName(e){return Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(this.rprods.has(e),`Undeclared production ${e}`),this.rprods.get(e)}getProd(e){return Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(this.prods.has(e),`Undeclared productio ${e}`),this.prods.get(e)}}class GrammarNode extends ASTree{constructor(e,t,r){super(),this._env=new Env,this.nts=[],this.tpNodes=e,this.prodNodes=r,this.ntNodes=t;for(let{token:t}of e){let e=t.value;if(this.env.hasSym(e))throw new Error(`Duplicate declared variable ${e} at (${t.lineNo},${t.colNo})`);this.env.registerSym(e,new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.o(e))}for(let e=0;e<t.length;e++){let r,n=t[e].token,o=t[e].varName;if(this.env.hasSym(o))throw new Error(`Duplicate declared variable ${o} at (${n.lineNo},${n.colNo})`);0==e?this.startSym=r=new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.h(o,!0):r=new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.h(o),this.env.registerSym(o,r),this.nts.push(r)}this.prodNodeGroups=Object(lodash_groupBy__WEBPACK_IMPORTED_MODULE_3__.a)(this.prodNodes,e=>e.ntVarName);let n=0;for(let e in this.prodNodeGroups){let t=this.prodNodeGroups[e];for(let e of t)e.pid=n++,e.varName="p"+e.pid,e.env=this.env}}get env(){return this._env}accpet(e){for(let t of this.tpNodes)e.visitTokenProNode(t);for(let t of this.ntNodes)e.visitNonterminalNode(t);for(let t of this.prodNodes)e.visitProductionNode(t);e.visitGrammarNode(this)}}class TokenProNode extends ASTree{constructor(e){super(),this.token=e,this.varName=e.value}accpet(e){e.visitTokenProNode(this)}}class ProductionNode extends ASTree{constructor(e,t){super(),this.left=e,this.ntVarName=e.value,t[0].tag==Tag.SCRIPT&&(this.preAction=t[0]),t[t.length-1].tag==Tag.SCRIPT&&(this.postAction=t[t.length-1]),this.rawBody=new Array;let r=null==this.preAction?0:1,n=null==this.postAction?t.length-1:t.length-2;for(let e=r;e<=n;e++){let r,o=t[e];e+1<=n&&t[e+1].tag==Tag.SCRIPT&&(r=t[e+1],e++),this.rawBody.push({symToken:o,action:r})}}accpet(e){e.visitProductionNode(this)}}class NonTerminalNode extends ASTree{constructor(e,t){let r;super(),this._varName=e.value,this.token=e,this.prods=t;for(let e of t)if(null==r&&null!=e.postAction){r=e.postAction;break}for(let e=0;e<t.length;e++)if(null==t[e].postAction){for(let r=e+1;r<t.length;r++)if(null!=t[r].postAction){t[e].postAction=t[r].postAction;break}null==t[e].postAction&&(t[e].postAction=r)}}get varName(){return this._varName}accpet(e){e.visitNonterminalNode(this)}}function pos(e){return`(${e.lineNo},${e.colNo})`}const TOKEN_KEY="TOKEN_PROTOTYPES",GRAMMAR_KEY="GRAMMAR",SPA_KEY="SYMBOL_ASSOC_PREC";function parse(e){return function(){let r,o,i,s=new Array;s.push(...t()),e.peek().value==TOKEN_KEY?(e.next(),i=function(){let t=[];for(;e.peek().tag==Tag.ID&&(t.push(new TokenProNode(e.next())),","==e.peek().value);)e.next();return t}()):i=[];s.push(...t()),e.peek().value==GRAMMAR_KEY?(e.next(),r=function(e){let t,r=new Array,o=new Array;for(;null!=(t=n());)r.push(t),o.push(t.key);Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(r.length>0,"The grammar should have at least one non-terminal ");let i=new Array,s=new Array;for(let{key:e,prods:t}of r){let r=new Array;for(let n of t)r.push(new ProductionNode(e,n));i.push(new NonTerminalNode(e,r)),s.push(...r)}return new GrammarNode(e,i,s)}(i),s.push(r)):function(e,t){throw new Error(`Expected token is ${e}, but actually ${t}`)}(GRAMMAR_KEY,e.peek().value);s.push(...t()),e.peek().value==SPA_KEY?(e.next(),o=function(){let t=new Array;for(;r=e.peek(),r.tag==Tag.STRING||r.tag==Tag.ID;){let r,n,o=e.next();if(e.peek().tag==Tag.ASSOC&&(r=e.next()),e.peek().tag==Tag.NUMBER&&(n=e.next()),void 0===r&&void 0===n)throw new Error(`expect a left/right or number at (${pos(e.peek())})`);t.push(new PrecassocItemNode([o,r,n]))}var r;if(t.length>0)return new PrecAssocNode(t)}(),null!=o&&s.push(o)):o=new PrecAssocNode([]);if(s.push(...t()),e.peek().tag!=Tag.EOF)throw new Error(`Unexpected block "${e.peek().value}" at `+pos(e.peek()));return new ProgramNode(r,o,s)}();function t(){let t=[];for(;e.peek().tag==Tag.SCRIPT;)t.push(new ScriptNode(e.next()));return t}function r(t,r){let n=e.next(),o=n.tag!=t,i=null!=r&&n.value!=r;if(o){let e=i?`expect ${t} ${r} at ${pos(n)}`:`expect ${t} at ${pos(n)}`;throw new Error(e)}}function n(){if(e.peek().tag!=Tag.ID)return;let t=e.next();r(Tag.SINGLE,"-"),r(Tag.SINGLE,">");let n=[];for(;;){let t=o();if("|"!=e.peek().value){if(";"==e.peek().value){n.push(t),e.next();break}throw new Error(`Unexpected symbol "${e.peek().value}" at `+pos(e.peek()))}n.push(t),t=[],e.next()}return{key:t,prods:n}}function o(){let t=new Array,r=!1,n=!1;for(;;)if(e.peek().tag==Tag.ID||e.peek().tag==Tag.STRING){if(n)throw new Error('The NIL production can\'t have any symbol,expected ";" at'+pos(e.peek()));r=!1,t.push(e.next())}else if(e.peek().tag==Tag.NIL)r=!1,n=!0,t.push(e.next());else{if(e.peek().tag!=Tag.SCRIPT)break;if(r)throw new Error("The production body cannot have multiple continuous script,"+pos(e.peek()));t.push(e.next()),r=!0}return t}}class EvalVisitor{constructor(e){this.traits=new Map,this.nts=[],this.prods=[],this.context=e}get grammar(){if(null==this._grammar){let{parser:e}=this.context;this._grammar="LL"==e?new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.f(this.nts,this.prods,this.startSym,this.traits):new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.b(this.nts,this.prods,this.startSym,this.traits)}return this._grammar}visitProgramNode(e){}visitScriptNode(e){}visitGrammarNode(e){this.startSym=e.startSym,this.nts=e.nts,this.env=e.env}visitTokenProNode(e){}visitNonterminalNode(e){}visitProductionNode(node){let nt=node.env.getSym(node.ntVarName),body=new Array;for(let{symToken:e}of node.rawBody)if(e.tag==Tag.STRING)body.push(new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.n(e.value));else{if(e.tag!=Tag.ID&&e.tag!=Tag.NIL)throw new Error(`Unknow token ${e}!`);{let t=node.env.getSym(e.value);Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(null!=t,`Undeclared identifier "${e.value}" at `+pos(e)),body.push(new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.n(t))}}let preAction=null==node.preAction?void 0:eval(node.preAction.value),postAction=null==node.postAction?void 0:eval(node.postAction.value);Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(null!=node.pid);let prod=new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.j(node.pid,nt,body,preAction,postAction);node.env.registerProd(prod,node.varName),nt.prods.push(prod),this.prods.push(prod)}visitPrecAssocNode(e){for(let{symbol:t,prec:r,leftAssoc:n}of e.children)t.tag==Tag.STRING?this.traits.set(t.value,new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.m(r,n)):t.tag==Tag.ID&&this.traits.set(this.env.getSym(t.value),new _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.m(r,n))}}const DEFINITION_PACKAGE="@parser-generator/definition",LR_PARSING_TABLE_VAR="table",FIRST_SET_VAR="first",FOLLOW_SET_VAR="follow",SYMBOL_TRAITS_VAR="traits";class TSCodegenVisitor{constructor(e){this._code="",this.context=e,this.emit(`import { ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.h.name}, ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.o.name}, ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.j.name}, ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.n.name}, SSymbol ,${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.m.name}, NIL, Terminal, EOF `),"LL"==e.parser?this.emit("}"):this.emit(`,${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.i.name}, ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.e.name}, ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.l.name}, ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.a.name}, ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.k.name} }`),this.emitln(` from "${DEFINITION_PACKAGE}";`)}emit(e){this._code+=e}emitln(e){this.emit(e+"\n")}get code(){return this._code}visitProgramNode(e){"LL"==this.context.parser?this.emitln(`export { ${FIRST_SET_VAR},${FOLLOW_SET_VAR} }`):this.emitln(`export default ${LR_PARSING_TABLE_VAR};`)}visitScriptNode(e){this.emit(e.script+"\n")}visitGrammarNode(e){for(let t in e.prodNodeGroups){let r=e.prodNodeGroups[t],n=new Array;for(let e of r)n.push(e.varName);this.emitln(`${t}.prods=[${n.join(",")}];`)}let t=e.env;if("LL"==this.context.parser){let{firstTable:e,followTable:r}=this.context;Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(null!=e&&null!=r,"First-table and follow-table is required for lr-parser code generator"),this.emitln("/* first set */"),this.emitln(`let ${FIRST_SET_VAR} = new Map<${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.h.name},Map<Terminal,${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.j.name}>>();`);for(let[r,n]of e){let e=`${FIRST_SET_VAR}.set(${t.getSymVarName(r)},`;e+=`new Map<Terminal,${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.j.name}>([`;for(let[r,o]of n){e+=`[${"string"==typeof r?`"${r}"`:t.getSymVarName(r)},${t.getProdVarName(o)}],`}e=e.replace(/,$/,""),e+="])",e+=");",this.emitln(e)}this.emitln("/* follow set */"),this.emitln(`let ${FOLLOW_SET_VAR} = new Map<${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.h.name},Set<Terminal>>();`);for(let[e,n]of r){let r=`${FOLLOW_SET_VAR}.set(${t.getSymVarName(e)},`;r+="new Set<Terminal>([";for(let e of n)r+="string"==typeof e?`"${e}",`:t.getSymVarName(e)+",";r=r.replace(/,$/,""),r+="])",r+=");",this.emitln(r)}}else{let{lrTable:e}=this.context;Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(null!=e,"LR parsing table is required for lr-parser code generator"),this.emitln(`let ${LR_PARSING_TABLE_VAR} = new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.i.name}();`);for(let[r,n]of e.table)for(let[e,o]of n)"string"==typeof e?this.emit(`${LR_PARSING_TABLE_VAR}.put(${r},"${e}",`):this.emit(`${LR_PARSING_TABLE_VAR}.put(${r},${t.getSymVarName(e)},`),o.isShift()?this.emit(`new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.l.name}(${o.nextStateId})`):o.isReduce()?this.emit(`new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.k.name}(${t.getProdVarName(o.prod)})`):o.isGoto()?this.emit(`new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.e.name}(${o.nextStateId})`):o.isAccept()&&this.emit(`new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.a.name}()`),this.emitln(");")}}visitTokenProNode(e){this.emitln(`export let ${e.varName} = new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.o.name}("${e.varName}");`)}visitNonterminalNode(e){this.emitln(`let ${e.varName} = new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.h.name}("${e.varName}");`)}visitProductionNode(e){this.emitln(`/* ${e.env.getProd(e.varName).toString()} */`);let t=`let ${e.varName} = new ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.j.name}(${e.pid},${e.ntVarName}`;t+=",[";for(let{symToken:r,action:n}of e.rawBody){let e=r.tag==Tag.STRING?`"${r.value}"`:r.value,o=null==n?"":","+n.value;t+=`\n\tnew ${_parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.n.name}(${e}${o}),`}t=t.replace(/,$/,""),t+="]",null!=e.preAction?t+=","+e.preAction.value:t+=",undefined",null!=e.postAction?t+=","+e.postAction.value:t+=",undefined",t+=");",this.emit(t),this.emit("\n")}visitPrecAssocNode(e){}}function genParser(e,{parser:t="LR1",lang:r="TS"}){let n=parse(new GrammarLexer(e)),o=new EvalVisitor({parser:t});n.accpet(o);let i,s,a,c,u=o.grammar,l=new _parser_generator_core__WEBPACK_IMPORTED_MODULE_4__.a(u);i=l.getFirstTable();let f,h=new _parser_generator_core__WEBPACK_IMPORTED_MODULE_4__.b(u,l);if(s=h.getFollowTable(),"LL"==t);else if(Object(_light0x00_shim__WEBPACK_IMPORTED_MODULE_1__.assert)(u instanceof _parser_generator_definition__WEBPACK_IMPORTED_MODULE_0__.b),"SLR"==t)c=Object(_parser_generator_core__WEBPACK_IMPORTED_MODULE_4__.e)(u),a=Object(_parser_generator_core__WEBPACK_IMPORTED_MODULE_4__.f)(u,c,e=>h.getFollowSet(e));else if("LR1"==t)c=Object(_parser_generator_core__WEBPACK_IMPORTED_MODULE_4__.c)(u,e=>l.getFirstSet(e)),a=Object(_parser_generator_core__WEBPACK_IMPORTED_MODULE_4__.d)(u,c);else if("LALR"==t)throw new Error("LALR parsing table is unimplemented!");if("TS"!=r)throw new Error("JS code generator is unimplemented");return f=new TSCodegenVisitor({parser:t,firstTable:i,followTable:s,lrTable:a}),n.accpet(f),{code:f.code,grammar:u,firstTable:i,followTable:s,lrTable:a,lrAutomata:c}}},function(e,t,r){"use strict";t.a=function(){return!1}},function(e,t,r){"use strict";(function(e){var n=r(3),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?n.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(41)(e))},function(e,t,r){"use strict";var n=r(26);var o=function(e,t,r,n){for(var o=-1,i=null==e?0:e.length;++o<i;){var s=e[o];t(n,s,r(s),e)}return n};var i=function(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++o];if(!1===r(i[c],c,i))break}return t}}(),s=r(11);var a=function(e,t){return e&&i(e,t,s.a)},c=r(23);var u=function(e,t){return function(r,n){if(null==r)return r;if(!Object(c.a)(r))return e(r,n);for(var o=r.length,i=t?o:-1,s=Object(r);(t?i--:++i<o)&&!1!==n(s[i],i,s););return r}}(a);var l=function(e,t,r,n){return u(e,(function(e,o,i){t(n,e,r(e),i)})),n},f=r(17),h=r(19);var p=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var d=function(e){return this.__data__.has(e)};function _(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new h.a;++t<r;)this.add(e[t])}_.prototype.add=_.prototype.push=p,_.prototype.has=d;var g=_;var b=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var y=function(e,t){return e.has(t)};var v=function(e,t,r,n,o,i){var s=1&r,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var l=-1,f=!0,h=2&r?new g:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var p=e[l],d=t[l];if(n)var _=s?n(d,p,l,t,e,i):n(p,d,l,e,t,i);if(void 0!==_){if(_)continue;f=!1;break}if(h){if(!b(t,(function(e,t){if(!y(h,t)&&(p===e||o(p,e,r,n,i)))return h.push(t)}))){f=!1;break}}else if(p!==d&&!o(p,d,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f},m=r(6),O=r(28),w=r(22);var j=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var A=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},E=m.a?m.a.prototype:void 0,S=E?E.valueOf:void 0;var T=function(e,t,r,n,o,i,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new O.a(e),new O.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(w.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=j;case"[object Set]":var c=1&n;if(a||(a=A),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=2,s.set(e,t);var l=v(a(e),a(t),n,o,i,s);return s.delete(e),l;case"[object Symbol]":if(S)return S.call(e)==S.call(t)}return!1},C=r(29),P=Object.prototype.hasOwnProperty;var x=function(e,t,r,n,o,i){var s=1&r,a=Object(C.a)(e),c=a.length;if(c!=Object(C.a)(t).length&&!s)return!1;for(var u=c;u--;){var l=a[u];if(!(s?l in t:P.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var h=!0;i.set(e,t),i.set(t,e);for(var p=s;++u<c;){var d=e[l=a[u]],_=t[l];if(n)var g=s?n(_,d,l,t,e,i):n(d,_,l,e,t,i);if(!(void 0===g?d===_||o(d,_,r,n,i):g)){h=!1;break}p||(p="constructor"==l)}if(h&&!p){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(h=!1)}return i.delete(e),i.delete(t),h},M=r(12),R=r(2),$=r(18),N=r(39),k="[object Object]",I=Object.prototype.hasOwnProperty;var D=function(e,t,r,n,o,i){var s=Object(R.a)(e),a=Object(R.a)(t),c=s?"[object Array]":Object(M.a)(e),u=a?"[object Array]":Object(M.a)(t),l=(c="[object Arguments]"==c?k:c)==k,h=(u="[object Arguments]"==u?k:u)==k,p=c==u;if(p&&Object($.a)(e)){if(!Object($.a)(t))return!1;s=!0,l=!1}if(p&&!l)return i||(i=new f.a),s||Object(N.a)(e)?v(e,t,r,n,o,i):T(e,t,c,r,n,o,i);if(!(1&r)){var d=l&&I.call(e,"__wrapped__"),_=h&&I.call(t,"__wrapped__");if(d||_){var g=d?e.value():e,b=_?t.value():t;return i||(i=new f.a),o(g,b,r,n,i)}}return!!p&&(i||(i=new f.a),x(e,t,r,n,o,i))},L=r(5);var F=function e(t,r,n,o,i){return t===r||(null==t||null==r||!Object(L.a)(t)&&!Object(L.a)(r)?t!=t&&r!=r:D(t,r,n,o,e,i))};var B=function(e,t,r,n){var o=r.length,i=o,s=!n;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var c=(a=r[o])[0],u=e[c],l=a[1];if(s&&a[2]){if(void 0===u&&!(c in e))return!1}else{var h=new f.a;if(n)var p=n(u,l,c,e,t,h);if(!(void 0===p?F(l,u,3,n,h):p))return!1}}return!0},U=r(9);var W=function(e){return e==e&&!Object(U.a)(e)};var K=function(e){for(var t=Object(s.a)(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,W(o)]}return t};var G=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}};var z=function(e){var t=K(e);return 1==t.length&&t[0][2]?G(t[0][0],t[0][1]):function(r){return r===e||B(r,e,t)}},V=r(10);var q=function(e){return"symbol"==typeof e||Object(L.a)(e)&&"[object Symbol]"==Object(V.a)(e)},Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/;var H=function(e,t){if(Object(R.a)(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!q(e))||(Q.test(e)||!Y.test(e)||null!=t&&e in Object(t))};function J(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(J.Cache||h.a),r}J.Cache=h.a;var Z=J;var X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/\\(\\)?/g,te=function(e){var t=Z(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(X,(function(e,r,n,o){t.push(n?o.replace(ee,"$1"):r||e)})),t}));var re=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},ne=m.a?m.a.prototype:void 0,oe=ne?ne.toString:void 0;var ie=function e(t){if("string"==typeof t)return t;if(Object(R.a)(t))return re(t,e)+"";if(q(t))return oe?oe.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r};var se=function(e){return null==e?"":ie(e)};var ae=function(e,t){return Object(R.a)(e)?e:H(e,t)?[e]:te(se(e))};var ce=function(e){if("string"==typeof e||q(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var ue=function(e,t){for(var r=0,n=(t=ae(t,e)).length;null!=e&&r<n;)e=e[ce(t[r++])];return r&&r==n?e:void 0};var le=function(e,t,r){var n=null==e?void 0:ue(e,t);return void 0===n?r:n};var fe=function(e,t){return null!=e&&t in Object(e)},he=r(38),pe=r(35),de=r(24);var _e=function(e,t,r){for(var n=-1,o=(t=ae(t,e)).length,i=!1;++n<o;){var s=ce(t[n]);if(!(i=null!=e&&r(e,s)))break;e=e[s]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&Object(de.a)(o)&&Object(pe.a)(s,o)&&(Object(R.a)(e)||Object(he.a)(e))};var ge=function(e,t){return null!=e&&_e(e,t,fe)};var be=function(e,t){return H(e)&&W(t)?G(ce(e),t):function(r){var n=le(r,e);return void 0===n&&n===t?ge(r,e):F(t,n,3)}};var ye=function(e){return e};var ve=function(e){return function(t){return null==t?void 0:t[e]}};var me=function(e){return function(t){return ue(t,e)}};var Oe=function(e){return H(e)?ve(ce(e)):me(e)};var we=function(e){return"function"==typeof e?e:null==e?ye:"object"==typeof e?Object(R.a)(e)?be(e[0],e[1]):z(e):Oe(e)};var je=function(e,t){return function(r,n){var i=Object(R.a)(r)?o:l,s=t?t():{};return i(r,e,we(n,2),s)}},Ae=Object.prototype.hasOwnProperty,Ee=je((function(e,t,r){Ae.call(e,r)?e[r].push(t):Object(n.a)(e,r,[t])}));t.a=Ee},function(e,t,r){"use strict";var n=r(17);var o=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},i=r(26),s=r(22),a=Object.prototype.hasOwnProperty;var c=function(e,t,r){var n=e[t];a.call(e,t)&&Object(s.a)(n,r)&&(void 0!==r||t in e)||Object(i.a)(e,t,r)};var u=function(e,t,r,n){var o=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var u=t[s],l=n?n(r[u],e[u],u,r,e):void 0;void 0===l&&(l=e[u]),o?Object(i.a)(r,u,l):c(r,u,l)}return r},l=r(11);var f=function(e,t){return e&&u(t,Object(l.a)(t),e)},h=r(37),p=r(9),d=r(21);var _=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},g=Object.prototype.hasOwnProperty;var b=function(e){if(!Object(p.a)(e))return _(e);var t=Object(d.a)(e),r=[];for(var n in e)("constructor"!=n||!t&&g.call(e,n))&&r.push(n);return r},y=r(23);var v=function(e){return Object(y.a)(e)?Object(h.a)(e,!0):b(e)};var m=function(e,t){return e&&u(t,v(t),e)},O=r(44);var w=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},j=r(27);var A=function(e,t){return u(e,Object(j.a)(e),t)},E=r(34),S=r(32),T=Object(S.a)(Object.getPrototypeOf,Object),C=r(33),P=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(E.a)(t,Object(j.a)(e)),e=T(e);return t}:C.a;var x=function(e,t){return u(e,P(e),t)},M=r(29),R=r(36);var $=function(e){return Object(R.a)(e,v,P)},N=r(12),k=Object.prototype.hasOwnProperty;var I=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&k.call(e,"index")&&(r.index=e.index,r.input=e.input),r},D=r(28);var L=function(e){var t=new e.constructor(e.byteLength);return new D.a(t).set(new D.a(e)),t};var F=function(e,t){var r=t?L(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},B=/\w*$/;var U=function(e){var t=new e.constructor(e.source,B.exec(e));return t.lastIndex=e.lastIndex,t},W=r(6),K=W.a?W.a.prototype:void 0,G=K?K.valueOf:void 0;var z=function(e){return G?Object(G.call(e)):{}};var V=function(e,t){var r=t?L(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var q=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return L(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return F(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return V(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return U(e);case"[object Set]":return new n;case"[object Symbol]":return z(e)}},Y=Object.create,Q=function(){function e(){}return function(t){if(!Object(p.a)(t))return{};if(Y)return Y(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var H=function(e){return"function"!=typeof e.constructor||Object(d.a)(e)?{}:Q(T(e))},J=r(2),Z=r(18),X=r(5);var ee=function(e){return Object(X.a)(e)&&"[object Map]"==Object(N.a)(e)},te=r(25),re=r(13),ne=re.a&&re.a.isMap,oe=ne?Object(te.a)(ne):ee;var ie=function(e){return Object(X.a)(e)&&"[object Set]"==Object(N.a)(e)},se=re.a&&re.a.isSet,ae=se?Object(te.a)(se):ie,ce={};ce["[object Arguments]"]=ce["[object Array]"]=ce["[object ArrayBuffer]"]=ce["[object DataView]"]=ce["[object Boolean]"]=ce["[object Date]"]=ce["[object Float32Array]"]=ce["[object Float64Array]"]=ce["[object Int8Array]"]=ce["[object Int16Array]"]=ce["[object Int32Array]"]=ce["[object Map]"]=ce["[object Number]"]=ce["[object Object]"]=ce["[object RegExp]"]=ce["[object Set]"]=ce["[object String]"]=ce["[object Symbol]"]=ce["[object Uint8Array]"]=ce["[object Uint8ClampedArray]"]=ce["[object Uint16Array]"]=ce["[object Uint32Array]"]=!0,ce["[object Error]"]=ce["[object Function]"]=ce["[object WeakMap]"]=!1;var ue=function e(t,r,i,s,a,u){var h,d=1&r,_=2&r,g=4&r;if(i&&(h=a?i(t,s,a,u):i(t)),void 0!==h)return h;if(!Object(p.a)(t))return t;var b=Object(J.a)(t);if(b){if(h=I(t),!d)return w(t,h)}else{var y=Object(N.a)(t),v="[object Function]"==y||"[object GeneratorFunction]"==y;if(Object(Z.a)(t))return Object(O.a)(t,d);if("[object Object]"==y||"[object Arguments]"==y||v&&!a){if(h=_||v?{}:H(t),!d)return _?x(t,m(h,t)):A(t,f(h,t))}else{if(!ce[y])return a?t:{};h=q(t,y,d)}}u||(u=new n.a);var j=u.get(t);if(j)return j;u.set(t,h),ae(t)?t.forEach((function(n){h.add(e(n,r,i,n,t,u))})):oe(t)&&t.forEach((function(n,o){h.set(o,e(n,r,i,o,t,u))}));var E=g?_?$:M.a:_?keysIn:l.a,S=b?void 0:E(t);return o(S||t,(function(n,o){S&&(n=t[o=n]),c(h,o,e(n,r,i,o,t,u))})),h};t.a=function(e){return ue(e,5)}},function(e,t,r){e.exports=function(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let r;function s(...e){if(!s.enabled)return;const t=s,o=Number(new Date),i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return r;a++;const i=n.formatters[o];if("function"==typeof i){const n=e[a];r=i.call(t,n),e.splice(a,1),a--}return r}),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){const e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){const r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){const e=[...n.names.map(s),...n.skips.map(s).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){const e=n.instances[t];e.enabled=n.enabled(e.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(48),Object.keys(e).forEach(t=>{n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t){var r=1e3,n=6e4,o=60*n,i=24*o;function s(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return s(e,t,i,"day");if(t>=o)return s(e,t,o,"hour");if(t>=n)return s(e,t,n,"minute");if(t>=r)return s(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";(function(t){const r="Hyper"===t.env.TERM_PROGRAM,n="win32"===t.platform,o="linux"===t.platform,i={ballotDisabled:"☒",ballotOff:"☐",ballotOn:"☑",bullet:"•",bulletWhite:"◦",fullBlock:"█",heart:"❤",identicalTo:"≡",line:"─",mark:"※",middot:"·",minus:"－",multiplication:"×",obelus:"÷",pencilDownRight:"✎",pencilRight:"✏",pencilUpRight:"✐",percent:"%",pilcrow2:"❡",pilcrow:"¶",plusMinus:"±",section:"§",starsOff:"☆",starsOn:"★",upDownArrow:"↕"},s=Object.assign({},i,{check:"√",cross:"×",ellipsisLarge:"...",ellipsis:"...",info:"i",question:"?",questionSmall:"?",pointer:">",pointerSmall:"»",radioOff:"( )",radioOn:"(*)",warning:"‼"}),a=Object.assign({},i,{ballotCross:"✘",check:"✔",cross:"✖",ellipsisLarge:"⋯",ellipsis:"…",info:"ℹ",question:"?",questionFull:"？",questionSmall:"﹖",pointer:o?"▸":"❯",pointerSmall:o?"‣":"›",radioOff:"◯",radioOn:"◉",warning:"⚠"});e.exports=n&&!r?s:a,Reflect.defineProperty(e.exports,"common",{enumerable:!1,value:i}),Reflect.defineProperty(e.exports,"windows",{enumerable:!1,value:s}),Reflect.defineProperty(e.exports,"other",{enumerable:!1,value:a})}).call(this,r(40))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"lrTableToDimArr",(function(){return s})),r.d(n,"lrAutomataToGraph",(function(){return a})),r.d(n,"followTableToDimArr",(function(){return c})),r.d(n,"firstTableToDimArr",(function(){return u}));var o=r(42),i=r(0);function s(e){let t=new Array,r=new Set;for(let t of e.table.values())for(let e of t.keys())r.add(e);let n=Array.from(r.keys()).map(e=>e+"");n.unshift(""),t.push(n);for(let[n,o]of e.table){let e=[];e.push(n+"");for(let t of r)o.has(t)?e.push(o.get(t)+""):e.push("");t.push(e)}return t}function a(e){let t=[],r=[],n=0,o=Math.round(Math.sqrt(e.length));for(let s of e){t.push({id:s.id,label:`${s.toString()}`,x:n%o*400,y:400*Math.floor(n/o)});for(let[e,t]of s.mapping)r.push({from:s.id,to:t.id,label:Object(i.p)(e)?e.name:"string"==typeof e?`"${e.replace(/"/g,'\\"')}"`:e});n++}return{nodes:t,edges:r}}function c(e){let t=new Array,r=new Set;for(let t of e.values())for(let e of t.keys())r.add(e);let n=Array.from(r).map(e=>e+"");n.unshift(""),t.push(n);for(let[n,o]of e){let e=[];e.push(n+"");for(let t of r)o.has(t)?e.push("y"):e.push("");t.push(e)}return t}function u(e){let t=new Array,r=new Set;for(let t of e.values())for(let e of t.keys())r.add(e);let n=Array.from(r).map(e=>e+"");n.unshift(""),t.push(n);for(let[n,o]of e){let e=[];e.push(n+"");for(let t of r)o.has(t)?e.push(o.get(t).id+""):e.push("");t.push(e)}return t}const l=n;onmessage=function(e){try{let t=Object(o.a)(e.data.grammar,e.data.options);console.log(t);let{code:r,grammar:n,lrTable:i,lrAutomata:s,firstTable:a,followTable:c}=t,u={code:r,productions:n.productions().map(e=>({id:e.id,head:e.head.toString(),body:e.body.map(e=>e.toString()),action:null!=e.action?e.action.toString():""})),lrTable:l.lrTableToDimArr(i),firstTable:l.firstTableToDimArr(a),followTable:l.followTableToDimArr(c),lrAutomata:l.lrAutomataToGraph(s)};postMessage({hasError:!1,result:u})}catch(e){console.error(e),postMessage({hasError:!0,error:e})}}}]);